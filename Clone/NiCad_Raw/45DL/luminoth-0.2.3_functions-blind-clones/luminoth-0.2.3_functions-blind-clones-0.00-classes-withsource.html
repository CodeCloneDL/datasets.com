<html>
<head>
    <title>NiCad6 Clone Report</title>
    <style type="text/css">
        body {font-family:sans-serif;}
        table {background-color:white; border:0px; padding:0px; border-spacing:4px; width:auto; margin-left:30px; margin-right:auto;}
        td {background-color:rgba(192,212,238,0.8); border:0px; padding:8px; width:auto; vertical-align:top; border-radius:8px}
        pre {background-color:white; padding:4px;}
        a {color:darkblue;}
    </style>
</head>
<body>
<h2>NiCad6 Clone Report</h2>
<table>
<tr style="font-size:14pt">
<td><b>System:</b> &nbsp; luminoth-0.2.3</td>
<td><b>Clone pairs:</b> &nbsp; 3</td>
<td><b>Clone classes:</b> &nbsp; 3</td>
</tr>
<tr style="font-size:12pt">
<td style="background-color:white">Clone type: &nbsp; 2</td>
<td style="background-color:white">Granularity: &nbsp; functions-blind</td>
<td style="background-color:white">Max diff threshold: &nbsp; 0%</td>
<td style="background-color:white">Clone size: &nbsp; 10 - 2500 lines</td>
<td style="background-color:white">Total functions-blind: &nbsp; 441</td>
</tr>
</table>
<br>
<table style="width:1000px; border:2px solid lightgrey; border-radius:8px;">
<tr><td style="background-color:white">
<p style="font-size:14pt"><b>Class 1:</b> &nbsp; 2 fragments, nominal size 13 lines, similarity 100%</p>
<table cellpadding=4 border=2>
<tr>
<td width="auto">
<a onclick="javascript:ShowHide('frag95')" href="javascript:;">
luminoth-0.2.3/luminoth/models/fasterrcnn/rpn_target.py: 204-225
</a>
<div class="mid" id="frag95" style="display:none"><pre>
        def subsample_positive():
            # Shuffle the foreground indices
            disable_fg_inds = tf.random_shuffle(fg_inds, seed=self._seed)
            # Select the indices that we have to ignore, this is
            # `tf.shape(fg_inds)[0] - num_fg` because we want to get only
            # `num_fg` foreground labels.
            disable_place = (tf.shape(fg_inds)[0] - num_fg)
            disable_fg_inds = disable_fg_inds[:disable_place]
            # Order the indices for sparse_to_dense compatibility
            disable_fg_inds, _ = tf.nn.top_k(
                disable_fg_inds, k=tf.shape(disable_fg_inds)[-1])
            disable_fg_inds = tf.reverse(disable_fg_inds, [0])
            disable_fg_inds = tf.sparse_to_dense(
                disable_fg_inds, tf.shape(labels, out_type=tf.int64),
                True, default_value=False
            )
            # Put -1 to ignore the anchors in the selected indices
            return tf.where(
                condition=tf.squeeze(disable_fg_inds),
                x=tf.to_float(tf.fill(tf.shape(labels), -1)), y=labels
            )

</pre></div>
</td>
<td width="auto">
<a onclick="javascript:ShowHide('frag96')" href="javascript:;">
luminoth-0.2.3/luminoth/models/fasterrcnn/rpn_target.py: 241-266
</a>
<div class="mid" id="frag96" style="display:none"><pre>
        def subsample_negative():
            # Shuffle the background indices
            disable_bg_inds = tf.random_shuffle(bg_inds, seed=self._seed)

            # Select the indices that we have to ignore, this is
            # `tf.shape(bg_inds)[0] - num_bg` because we want to get only
            # `num_bg` background labels.
            disable_place = (tf.shape(bg_inds)[0] - num_bg)
            disable_bg_inds = disable_bg_inds[:disable_place]
            # Order the indices for sparse_to_dense compatibility
            disable_bg_inds, _ = tf.nn.top_k(
                disable_bg_inds, k=tf.shape(disable_bg_inds)[-1])
            disable_bg_inds = tf.reverse(disable_bg_inds, [0])
            disable_bg_inds = tf.sparse_to_dense(
                disable_bg_inds, tf.shape(labels, out_type=tf.int64),
                True, default_value=False
            )
            # Put -1 to ignore the anchors in the selected indices
            return tf.where(
                condition=tf.squeeze(disable_bg_inds),
                x=tf.to_float(tf.fill(tf.shape(labels), -1)), y=labels
            )

        # Recalculate the foreground indices after (maybe) disable some of them

        # Get foreground indices, get True in the indices where we have a one.
</pre></div>
</td>
</tr><tr>
</tr>
</table>
</td></tr>
</table>
<br>
<table style="width:1000px; border:2px solid lightgrey; border-radius:8px;">
<tr><td style="background-color:white">
<p style="font-size:14pt"><b>Class 2:</b> &nbsp; 2 fragments, nominal size 12 lines, similarity 100%</p>
<table cellpadding=4 border=2>
<tr>
<td width="auto">
<a onclick="javascript:ShowHide('frag235')" href="javascript:;">
luminoth-0.2.3/luminoth/utils/bbox_transform_test.py: 17-38
</a>
<div class="mid" id="frag235" style="display:none"><pre>
    def _encode(self, proposals, gt_boxes):
        """
        Encodes the adjustment from proposals to GT boxes using both the
        TensorFlow and the Numpy implementation.

        Asserts that both results are equal.
        """
        proposals_tf = tf.placeholder(tf.float32, shape=proposals.shape)
        gt_boxes_tf = tf.placeholder(tf.float32, shape=gt_boxes.shape)

        encoded_tf = encode_tf(proposals_tf, gt_boxes_tf)
        with self.test_session() as sess:
            encoded_tf_val = sess.run(encoded_tf, feed_dict={
                proposals_tf: proposals,
                gt_boxes_tf: gt_boxes,
            })

        encoded_np = encode_np(proposals, gt_boxes)

        self.assertAllClose(encoded_np, encoded_tf_val)
        return encoded_np

</pre></div>
</td>
<td width="auto">
<a onclick="javascript:ShowHide('frag236')" href="javascript:;">
luminoth-0.2.3/luminoth/utils/bbox_transform_test.py: 39-60
</a>
<div class="mid" id="frag236" style="display:none"><pre>
    def _decode(self, proposals, deltas):
        """
        Encodes the final boxes from proposals with deltas, using both the
        TensorFlow and the Numpy implementation.

        Asserts that both results are equal.
        """
        proposals_tf = tf.placeholder(tf.float32, shape=proposals.shape)
        deltas_tf = tf.placeholder(tf.float32, shape=deltas.shape)

        decoded_tf = decode_tf(proposals_tf, deltas_tf)
        with self.test_session() as sess:
            decoded_tf_val = sess.run(decoded_tf, feed_dict={
                proposals_tf: proposals,
                deltas_tf: deltas,
            })

        decoded_np = decode_np(proposals, deltas)

        self.assertAllClose(decoded_np, decoded_tf_val)
        return decoded_np

</pre></div>
</td>
</tr><tr>
</tr>
</table>
</td></tr>
</table>
<br>
<table style="width:1000px; border:2px solid lightgrey; border-radius:8px;">
<tr><td style="background-color:white">
<p style="font-size:14pt"><b>Class 3:</b> &nbsp; 2 fragments, nominal size 10 lines, similarity 100%</p>
<table cellpadding=4 border=2>
<tr>
<td width="auto">
<a onclick="javascript:ShowHide('frag381')" href="javascript:;">
luminoth-0.2.3/luminoth/tools/dataset/readers/object_detection/imagenet.py: 120-134
</a>
<div class="mid" id="frag381" style="display:none"><pre>
    def _validate_structure(self):
        if not tf.gfile.Exists(self._data_dir):
            raise InvalidDataDirectory(
                '"{}" does not exist.'.format(self._data_dir)
            )

        if not tf.gfile.Exists(self._imagesets_path):
            raise InvalidDataDirectory('ImageSets path is missing')

        if not tf.gfile.Exists(self._images_path):
            raise InvalidDataDirectory('Images path is missing')

        if not tf.gfile.Exists(self._annotations_path):
            raise InvalidDataDirectory('Annotations path is missing')

</pre></div>
</td>
<td width="auto">
<a onclick="javascript:ShowHide('frag390')" href="javascript:;">
luminoth-0.2.3/luminoth/tools/dataset/readers/object_detection/pascalvoc.py: 40-54
</a>
<div class="mid" id="frag390" style="display:none"><pre>
    def _validate_structure(self):
        if not tf.gfile.Exists(self._data_dir):
            raise InvalidDataDirectory(
                '"{}" does not exist.'.format(self._data_dir)
            )

        if not tf.gfile.Exists(self._labels_path):
            raise InvalidDataDirectory('Labels path is missing')

        if not tf.gfile.Exists(self._images_path):
            raise InvalidDataDirectory('Images path is missing')

        if not tf.gfile.Exists(self._annots_path):
            raise InvalidDataDirectory('Annotations path is missing')

</pre></div>
</td>
</tr><tr>
</tr>
</table>
</td></tr>
</table>
<script language="JavaScript">
function ShowHide(divId) { 
    if(document.getElementById(divId).style.display == 'none') {
        document.getElementById(divId).style.display='block';
    } else { 
        document.getElementById(divId).style.display = 'none';
    } 
}
</script>
</body>
</html>
